<!DOCTYPE html>
<html>
<head>
    <style>
        @import url("css/return.css");
        @import url("css/interlinkage.css");
        body {
            background: #DB9D59;
        }
        button {
            border: none;
            background: none;
            padding: 0;
            margin: 0;
        }
        
        #craftChoose {
            display: grid;
            grid-template-rows: auto 30px auto 15px auto; /* 自定义行高和间距 */
            justify-items: center;
            gap: 10px;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }

        #craftChoose img:first-child {
            grid-column: 1 / span 2;
            justify-self: center;
        }

        #craftChoose img:nth-child(2) {
            justify-self: start;
            margin-right: 30%;
        }

        #craftChoose img:nth-child(3) {
            justify-self: end;
            margin-left: 30%;
        }

        #craftChoose img:nth-child(4) {
            justify-self: start;
            margin-right: 15%;
        }

        #craftChoose img:nth-child(5) {
            justify-self: end;
            margin-left: 15%;
        }
    </style>
    <meta charset="utf-8">
    <title>合成 - 大兵蚁传奇</title> 
    <script src="script/choose.js"></script>
    <script src="script/include.js"></script>
    
</head>
<body>
    <a href="main.html"><button class="return-button" onlick="closeCraftAnt()">
        <span class="button-text">返回</span>
    </button></a>
    <br>
    <h1>合成</h1>
    <br>
    <div id="craftChoose"></div>
    <div id="chooseAnt"></div>
    <script>
        document.getElementById("craftChoose").innerHTML = '<img src="images/ant%27s%20images/none.png"> <img src="images/ant%27s%20images/none.png"> <img src="images/ant%27s%20images/none.png"> <img src="images/ant%27s%20images/none.png"> <img src="images/ant%27s%20images/none.png">';
        chooseAntBag(7, "chooseAnt", "chooseAnt", 5);
        var setAntId, setAntLevel;
        function chooseAnt(antId, antLevel){
            console.log(antId, antLevel);
            var userJson = loadGameDataLocally();
            if(userJson.hasAnts[antId][antLevel] < 5) return;
            userJson.hasAnts[antId][antLevel] -= 5;
            setAntId = antId, setAntLevel = antLevel;
            saveGameDataLocally(userJson);
            chooseAntBag(7, "setChooseAnt", "chooseAnt");
            fetch('ants_data.json')
            .then(response => response.json())
            .then(data => {
                ants = data;
                var craftChooseString = "";
                for(var i = 0; i < 5; i++){
                    craftChooseString += `<img src="${ants.ants[antId][level[antLevel]].image}" alt="${antId} ${level[antLevel]}"  width="50" height="50">`;
                }
                document.getElementById("craftChoose").innerHTML = craftChooseString;
            })
            .catch(error => console.error('Error loading ants data:', error));
        }
        function setChooseAnt(antId, antLevel)
        {
            var userJson = loadGameDataLocally();
            userJson.hasAnts[setAntId][setAntLevel] += 5;
            chooseAnt(antId, antLevel);
        }
        function closeCraftAnt()
        {
            var userJson = loadGameDataLocally();
            userJson.hasAnts[setAntId][setAntLevel] += 5;
        }
    </script>
</body>
</html>
